(function(){"use strict";var e={7996:function(e,t,a){a(4114);var i=a(6848),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},r=[],n={name:"App"},l=n,o=a(1656),u=(0,o.A)(l,s,r,!1,null,null,null),c=u.exports,h=a(6178),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"manager-container"},[t("el-container",[t("el-header",[t("div",{staticClass:"header-left"},[t("h2",[e._v("考试管理系统")])]),t("div",{staticClass:"header-right"},[t("el-dropdown",[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-user"}),e._v(" 管理员"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.Logout.apply(null,arguments)}}},[e._v("退出登录")])],1)],1)],1)]),t("el-container",[t("el-aside",{attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-active":e.$route.path,router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[t("el-menu-item",{attrs:{index:"/manager/users"}},[t("i",{staticClass:"el-icon-user"}),t("span",[e._v("用户管理")])]),t("el-menu-item",{attrs:{index:"/manager/questions"}},[t("i",{staticClass:"el-icon-question"}),t("span",[e._v("试题管理")])]),t("el-menu-item",{attrs:{index:"/manager/exams"}},[t("i",{staticClass:"el-icon-edit-outline"}),t("span",[e._v("考试管理")])]),t("el-menu-item",{attrs:{index:"/manager/results"}},[t("i",{staticClass:"el-icon-data-analysis"}),t("span",[e._v("考试结果")])])],1)],1),t("el-main",[t("router-view")],1)],1)],1)],1)},d=[],g={name:"Manager",methods:{Logout(){console.log("Logout method called"),localStorage.removeItem("xm-user"),localStorage.removeItem("token"),delete this.$axios.defaults.headers.common["token"],console.log("Cleared user data and token"),this.$router.replace("/login")}}},p=g,f=(0,o.A)(p,m,d,!1,null,"394c5427",null),x=f.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-management"},[t("div",{staticClass:"toolbar"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加用户")]),t("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"搜索用户"},on:{input:e.handleSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}},[t("i",{staticClass:"el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t("el-table-column",{attrs:{prop:"yonghuming",label:"用户名"}}),t("el-table-column",{attrs:{prop:"youjiandizhi",label:"邮箱"}}),t("el-table-column",{attrs:{prop:"shoujihao",label:"手机号"}}),t("el-table-column",{attrs:{prop:"zhuceshijian",label:"注册时间",width:"180"}}),t("el-table-column",{attrs:{prop:"role",label:"权限",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"admin"===a.row.role?"danger":"info"}},[e._v(" "+e._s("admin"===a.row.role?"管理员":"普通用户")+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"yonghuming"}},[t("el-input",{model:{value:e.userForm.yonghuming,callback:function(t){e.$set(e.userForm,"yonghuming",t)},expression:"userForm.yonghuming"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"youjiandizhi"}},[t("el-input",{model:{value:e.userForm.youjiandizhi,callback:function(t){e.$set(e.userForm,"youjiandizhi",t)},expression:"userForm.youjiandizhi"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"shoujihao"}},[t("el-input",{model:{value:e.userForm.shoujihao,callback:function(t){e.$set(e.userForm,"shoujihao",t)},expression:"userForm.shoujihao"}})],1),e.userForm.id?e._e():t("el-form-item",{attrs:{label:"密码",prop:"mima"}},[t("el-input",{attrs:{type:"password"},model:{value:e.userForm.mima,callback:function(t){e.$set(e.userForm,"mima",t)},expression:"userForm.mima"}})],1),t("el-form-item",{attrs:{label:"权限",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.userForm.role,callback:function(t){e.$set(e.userForm,"role",t)},expression:"userForm.role"}},[t("el-option",{attrs:{label:"普通用户",value:"user"}}),t("el-option",{attrs:{label:"管理员",value:"admin"}})],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)],1)},v=[],y=a(4373),w={name:"UserManagement",data(){return{searchQuery:"",tableData:[],currentPage:1,pageSize:10,total:0,dialogVisible:!1,dialogTitle:"",userForm:{yonghuming:"",youjiandizhi:"",shoujihao:"",mima:"",role:"user"},rules:{yonghuming:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],youjiandizhi:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],shoujihao:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],mima:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],role:[{required:!0,message:"请选择用户权限",trigger:"change"}]}}},created(){this.fetchData()},methods:{async fetchData(){try{const e=await y.A.get(`/users/page?pageNum=${this.currentPage}&pageSize=${this.pageSize}&search=${this.searchQuery}`);this.tableData=e.data.list,this.total=e.data.total}catch(e){this.$message.error("获取用户列表失败")}},handleSearch(){this.currentPage=1,this.fetchData()},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()},handleAdd(){this.dialogTitle="添加用户",this.userForm={yonghuming:"",youjiandizhi:"",shoujihao:"",mima:"",role:"user"},this.dialogVisible=!0},handleEdit(e){this.dialogTitle="编辑用户",this.userForm={...e},delete this.userForm.mima,this.dialogVisible=!0},async handleDelete(e){try{await this.$confirm("确认删除该用户?","提示",{type:"warning"}),await y.A.delete(`/users/${e.id}`),this.$message.success("删除成功"),this.fetchData()}catch(t){"cancel"!==t&&this.$message.error("删除失败")}},submitForm(){this.$refs.userForm.validate((async e=>{if(e)try{this.userForm.id?(await y.A.put("/users",this.userForm),this.$message.success("更新成功")):(await y.A.post("/users",this.userForm),this.$message.success("添加成功")),this.dialogVisible=!1,this.fetchData()}catch(t){this.$message.error("操作失败")}}))}}},k=w,_=(0,o.A)(k,b,v,!1,null,"419b83b2",null),F=_.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"question-management"},[t("div",{staticClass:"toolbar"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加试题")]),t("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"搜索试题"},on:{input:e.handleSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}},[t("i",{staticClass:"el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t("el-table-column",{attrs:{prop:"tixing",label:"题型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"单选题"===a.row.tixing?"primary":"多选题"===a.row.tixing?"success":"warning"}},[e._v(" "+e._s(a.row.tixing)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"tigan",label:"题干","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"nandu",label:"难度",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-rate",{attrs:{value:parseInt(a.row.nandu)||0,disabled:"","show-score":"","text-color":"#ff9900"},model:{value:a.row.nandu,callback:function(t){e.$set(a.row,"nandu",t)},expression:"scope.row.nandu"}})]}}])}),t("el-table-column",{attrs:{prop:"fenshu",label:"分数",width:"80"}}),t("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"800px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"questionForm",attrs:{model:e.questionForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"题型",prop:"tixing"}},[t("el-select",{attrs:{placeholder:"请选择题型"},model:{value:e.questionForm.tixing,callback:function(t){e.$set(e.questionForm,"tixing",t)},expression:"questionForm.tixing"}},[t("el-option",{attrs:{label:"单选题",value:"单选题"}}),t("el-option",{attrs:{label:"多选题",value:"多选题"}}),t("el-option",{attrs:{label:"判断题",value:"判断题"}})],1)],1),t("el-form-item",{attrs:{label:"题干",prop:"tigan"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.questionForm.tigan,callback:function(t){e.$set(e.questionForm,"tigan",t)},expression:"questionForm.tigan"}})],1),"判断题"!==e.questionForm.tixing?t("el-form-item",{attrs:{label:"选项A",prop:"xuanxianga"}},[t("el-input",{model:{value:e.questionForm.xuanxianga,callback:function(t){e.$set(e.questionForm,"xuanxianga",t)},expression:"questionForm.xuanxianga"}})],1):e._e(),"判断题"!==e.questionForm.tixing?t("el-form-item",{attrs:{label:"选项B",prop:"xuanxiangb"}},[t("el-input",{model:{value:e.questionForm.xuanxiangb,callback:function(t){e.$set(e.questionForm,"xuanxiangb",t)},expression:"questionForm.xuanxiangb"}})],1):e._e(),"判断题"!==e.questionForm.tixing?t("el-form-item",{attrs:{label:"选项C",prop:"xuanxiangc"}},[t("el-input",{model:{value:e.questionForm.xuanxiangc,callback:function(t){e.$set(e.questionForm,"xuanxiangc",t)},expression:"questionForm.xuanxiangc"}})],1):e._e(),"判断题"!==e.questionForm.tixing?t("el-form-item",{attrs:{label:"选项D",prop:"xuanxiangd"}},[t("el-input",{model:{value:e.questionForm.xuanxiangd,callback:function(t){e.$set(e.questionForm,"xuanxiangd",t)},expression:"questionForm.xuanxiangd"}})],1):e._e(),t("el-form-item",{attrs:{label:"答案",prop:"daan"}},[t("el-input",{attrs:{placeholder:"单选题填写A-D，多选题用逗号分隔，判断题填写'正确'或'错误'"},model:{value:e.questionForm.daan,callback:function(t){e.$set(e.questionForm,"daan",t)},expression:"questionForm.daan"}})],1),t("el-form-item",{attrs:{label:"难度",prop:"nandu"}},[t("el-rate",{attrs:{"show-score":"","text-color":"#ff9900"},model:{value:e.questionForm.nandu,callback:function(t){e.$set(e.questionForm,"nandu",t)},expression:"questionForm.nandu"}})],1),t("el-form-item",{attrs:{label:"分数",prop:"fenshu"}},[t("el-input-number",{attrs:{min:1,max:100},model:{value:e.questionForm.fenshu,callback:function(t){e.$set(e.questionForm,"fenshu",t)},expression:"questionForm.fenshu"}})],1),t("el-form-item",{attrs:{label:"解析",prop:"jiexi"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.questionForm.jiexi,callback:function(t){e.$set(e.questionForm,"jiexi",t)},expression:"questionForm.jiexi"}})],1),t("el-form-item",{attrs:{label:"知识点",prop:"zhishidianyiji"}},[t("el-cascader",{attrs:{options:e.knowledgeOptions,props:{checkStrictly:!0},clearable:""},model:{value:e.knowledgePoints,callback:function(t){e.knowledgePoints=t},expression:"knowledgePoints"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)],1)},S=[],q=(a(8111),a(2489),{name:"QuestionManagement",data(){return{searchQuery:"",tableData:[],currentPage:1,pageSize:10,total:0,dialogVisible:!1,dialogTitle:"",knowledgePoints:[],knowledgeOptions:[{value:"计算机基础",label:"计算机基础",children:[{value:"操作系统",label:"操作系统"},{value:"计算机网络",label:"计算机网络"},{value:"数据结构",label:"数据结构"}]},{value:"编程语言",label:"编程语言",children:[{value:"Java",label:"Java"},{value:"Python",label:"Python"},{value:"C++",label:"C++"}]}],questionForm:{tixing:"",tigan:"",daan:"",xuanxianga:"",xuanxiangb:"",xuanxiangc:"",xuanxiangd:"",nandu:3,fenshu:5,jiexi:"",zhishidianyiji:"",zhishidianerji:""},rules:{tixing:[{required:!0,message:"请选择题型",trigger:"change"}],tigan:[{required:!0,message:"请输入题干",trigger:"blur"}],daan:[{required:!0,message:"请输入答案",trigger:"blur"}],nandu:[{required:!0,message:"请选择难度",trigger:"change"}],fenshu:[{required:!0,message:"请输入分数",trigger:"blur"}]}}},created(){this.fetchData()},methods:{async fetchData(){try{const e=await y.A.get(`/shitiguanli/page?pageNum=${this.currentPage}&pageSize=${this.pageSize}&search=${this.searchQuery}`);this.tableData=e.data.list,this.total=e.data.total}catch(e){this.$message.error("获取试题列表失败")}},handleSearch(){this.currentPage=1,this.fetchData()},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()},handleAdd(){this.dialogTitle="添加试题",this.questionForm={tixing:"",tigan:"",daan:"",xuanxianga:"",xuanxiangb:"",xuanxiangc:"",xuanxiangd:"",nandu:3,fenshu:5,jiexi:"",zhishidianyiji:"",zhishidianerji:""},this.knowledgePoints=[],this.dialogVisible=!0},handleEdit(e){this.dialogTitle="编辑试题",this.questionForm={...e},this.knowledgePoints=[e.zhishidianyiji,e.zhishidianerji].filter(Boolean),this.dialogVisible=!0},async handleDelete(e){try{await this.$confirm("确认删除该试题?","提示",{type:"warning"}),await y.A.delete(`/shitiguanli/${e.id}`),this.$message.success("删除成功"),this.fetchData()}catch(t){"cancel"!==t&&this.$message.error("删除失败")}},submitForm(){this.$refs.questionForm.validate((async e=>{if(e)try{const e={...this.questionForm};this.knowledgePoints.length>0&&(e.zhishidianyiji=this.knowledgePoints[0],e.zhishidianerji=this.knowledgePoints[1]),e.id?(await y.A.put("/shitiguanli",e),this.$message.success("更新成功")):(await y.A.post("/shitiguanli",e),this.$message.success("添加成功")),this.dialogVisible=!1,this.fetchData()}catch(t){this.$message.error("操作失败")}}))}}}),z=q,j=(0,o.A)(z,$,S,!1,null,"371de7a4",null),C=j.exports,D=function(){var e=this,t=e._self._c;return t("div",{staticClass:"exam-management"},[t("div",{staticClass:"toolbar"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("创建考试")]),t("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"搜索考试"},on:{input:e.handleSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}},[t("i",{staticClass:"el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t("el-table-column",{attrs:{prop:"kaoshibiaoti",label:"考试标题"}}),t("el-table-column",{attrs:{prop:"timushuliang",label:"题目数量",width:"100"}}),t("el-table-column",{attrs:{label:"考试时间",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.kaoshikaishishijian)+" 至 "+e._s(t.row.kaoshijieshushijian)+" ")]}}])}),t("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getExamStatus(a.row).type}},[e._v(" "+e._s(e.getExamStatus(a.row).text)+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"examForm",attrs:{model:e.examForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"考试标题",prop:"kaoshibiaoti"}},[t("el-input",{model:{value:e.examForm.kaoshibiaoti,callback:function(t){e.$set(e.examForm,"kaoshibiaoti",t)},expression:"examForm.kaoshibiaoti"}})],1),t("el-form-item",{attrs:{label:"考试时间",prop:"examTime"}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.examForm.examTime,callback:function(t){e.$set(e.examForm,"examTime",t)},expression:"examForm.examTime"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)],1)},T=[],A=(a(8237),{name:"ExamManagement",data(){return{searchQuery:"",questionSearchQuery:"",tableData:[],currentPage:1,pageSize:10,total:0,dialogVisible:!1,questionsDialogVisible:!1,dialogTitle:"",examForm:{kaoshibiaoti:"",examTime:[]},rules:{kaoshibiaoti:[{required:!0,message:"请输入考试标题",trigger:"blur"}],examTime:[{required:!0,message:"请选择考试时间",trigger:"change"}]},availableQuestions:[],selectedQuestions:[],currentExamId:null}},computed:{totalScore(){return this.selectedQuestions.reduce(((e,t)=>e+Number(t.fenshu)),0)}},created(){this.fetchData()},methods:{getExamStatus(e){const t=(new Date).getTime(),a=new Date(e.kaoshikaishishijian).getTime(),i=new Date(e.kaoshijieshushijian).getTime();return t>i?{type:"danger",text:"已结束"}:t<a?{type:"info",text:"未开始"}:{type:"success",text:"进行中"}},async fetchData(){try{const e=await y.A.get(`/kaoshiguanli/page?pageNum=${this.currentPage}&pageSize=${this.pageSize}&search=${this.searchQuery}`);this.tableData=e.data.list,this.total=e.data.total}catch(e){this.$message.error("获取考试列表失败")}},handleSearch(){this.currentPage=1,this.fetchData()},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()},handleAdd(){this.dialogTitle="创建考试",this.examForm={kaoshibiaoti:"",examTime:[]},this.dialogVisible=!0},handleEdit(e){this.dialogTitle="编辑考试",this.examForm={...e,examTime:[e.kaoshikaishishijian,e.kaoshijieshushijian]},this.dialogVisible=!0},async handleDelete(e){try{await this.$confirm("确认删除该考试?","提示",{type:"warning"}),await y.A.delete(`/kaoshiguanli/${e.id}`),this.$message.success("删除成功"),this.fetchData()}catch(t){"cancel"!==t&&this.$message.error("删除失败")}},submitForm(){this.$refs.examForm.validate((async e=>{if(e)try{const e={...this.examForm,kaoshikaishishijian:this.examForm.examTime[0],kaoshijieshushijian:this.examForm.examTime[1],timushuliang:0};delete e.examTime,e.id?(await y.A.put("/kaoshiguanli",e),this.$message.success("更新成功")):(await y.A.post("/kaoshiguanli",e),this.$message.success("创建成功")),this.dialogVisible=!1,this.fetchData()}catch(t){this.$message.error("操作失败")}}))}}}),P=A,E=(0,o.A)(P,D,T,!1,null,"a8754636",null),V=E.exports,I=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"view-selector"},[t("el-radio-group",{on:{change:e.handleViewChange},model:{value:e.viewType,callback:function(t){e.viewType=t},expression:"viewType"}},[t("el-radio-button",{attrs:{label:"exam"}},[e._v("按考试查看")]),t("el-radio-button",{attrs:{label:"user"}},[e._v("按用户查看")])],1)],1),"exam"===e.viewType?t("div",[t("div",[t("h2",[e._v("考试列表")]),t("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择考试"},on:{change:e.loadDistribution},model:{value:e.selectedExam,callback:function(t){e.selectedExam=t},expression:"selectedExam"}},e._l(e.exams,(function(a){return t("el-option",{key:a.id,attrs:{label:a.title,value:a.id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.title))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(" 题目数: "+e._s(a.questionCount)+" | "+e._s(a.startTime)+" ~ "+e._s(a.endTime)+" ")])])})),1)],1),e.details.length>0?t("div",[t("h3",[e._v("考试成绩对比")]),t("div",{ref:"chart",staticStyle:{width:"100%",height:"500px"}})]):e._e(),e.selectedExam?t("div",[t("h3",[e._v("详细成绩列表")]),t("table",[e._m(0),t("tbody",e._l(e.details,(function(a){return t("tr",{key:a.userId},[t("td",[e._v(e._s(a.yonghuming))]),t("td",[e._v(e._s(a.score))])])})),0)])]):e._e()]):e._e(),"user"===e.viewType?t("div",[t("div",[t("h2",[e._v("用户成绩查询")]),t("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择用户"},on:{change:e.loadUserResults},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.users,(function(e){return t("el-option",{key:e.id,attrs:{label:e.yonghuming,value:e.id}})})),1)],1),e.userResults.length>0?t("div",[t("h3",[e._v("用户考试记录")]),t("table",[e._m(1),t("tbody",e._l(e.userResults,(function(a){return t("tr",{key:a.examId},[t("td",[e._v(e._s(e.getExamTitle(a.examId)))]),t("td",[e._v(e._s(a.yonghuming))]),t("td",[e._v(e._s(a.score))])])})),0)])]):e._e()]):e._e()])},Q=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("用户名")]),t("th",[e._v("分数")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("考试标题")]),t("th",[e._v("用户名")]),t("th",[e._v("分数")])])])}],O=(a(116),a(1701),a(9671)),M={data(){return{viewType:"exam",exams:[],selectedExam:null,details:[],chart:null,userId:"",users:[],userResults:[]}},mounted(){this.loadExams(),this.loadUsers()},beforeDestroy(){this.chart&&this.chart.dispose()},methods:{handleViewChange(){this.details=[],this.userResults=[],this.chart&&(this.chart.dispose(),this.chart=null)},async loadExams(){const e=await y.A.get("/api/exam");this.exams=e.data,this.exams.length>0&&(this.selectedExam=this.exams[0].id,this.loadDistribution())},async loadUsers(){try{const e=await y.A.get("/users/list");this.users=e.data}catch(e){this.$message.error("获取用户列表失败")}},async loadDistribution(){if(!this.selectedExam)return;const e=await y.A.get(`/api/exam/${this.selectedExam}/details`);this.details=e.data,this.$nextTick((()=>{this.chart||(this.chart=O.Ts(this.$refs.chart)),this.updateChart(),window.addEventListener("resize",(()=>{this.chart.resize()}))}))},async loadUserResults(){if(this.userId)try{const e=await y.A.get(`/api/exam/user/${this.userId}/results`);this.userResults=e.data,0===this.userResults.length&&this.$message.info("该用户暂无考试记录")}catch(e){this.$message.error("获取用户考试记录失败")}else this.$message.warning("请选择用户")},getExamTitle(e){const t=this.exams.find((t=>t.id===e));return t?t.title:`考试${e}`},updateChart(){if(!this.chart)return;const e={title:{text:"考试成绩对比",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.details.map((e=>e.yonghuming)),axisLabel:{interval:0,rotate:30}},yAxis:{type:"value",name:"分数",min:0,max:e=>10*Math.ceil(Math.max(...this.details.map((e=>e.score)))/10)},series:[{name:"分数",data:this.details.map((e=>e.score)),type:"bar",barWidth:"40%",itemStyle:{color:"#91cc75"},label:{show:!0,position:"top"}}]};this.chart.setOption(e)}}},L=M,R=(0,o.A)(L,I,Q,!1,null,"67d0dc96",null),U=R.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("el-card",{staticClass:"login-card"},[t("h2",[e._v("用户登录")]),t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"yonghuming"}},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginForm.yonghuming,callback:function(t){e.$set(e.loginForm,"yonghuming",t)},expression:"loginForm.yonghuming"}},[t("i",{staticClass:"el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"mima"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginForm.mima,callback:function(t){e.$set(e.loginForm,"mima",t)},expression:"loginForm.mima"}},[t("i",{staticClass:"el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1),t("div",{staticClass:"register-link"},[t("router-link",{attrs:{to:"/register"}},[e._v("还没有账号？立即注册")])],1)],1)],1)],1)},J=[],B={name:"Login",data(){return{loginForm:{yonghuming:"",mima:""},rules:{yonghuming:[{required:!0,message:"请输入用户名",trigger:"blur"}],mima:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{handleLogin(){this.$refs.loginForm.validate((async e=>{if(e)try{const e=await this.$axios.post("/users/login",this.loginForm);e.data.success?(localStorage.setItem("xm-user",JSON.stringify(e.data.data)),localStorage.setItem("token",e.data.token),this.$message.success("登录成功"),this.$router.replace("/manager/users")):this.$message.error(e.data.message||"登录失败")}catch(t){console.error("登录错误:",t),this.$message.error("登录失败，请稍后重试")}}))}}},H=B,W=(0,o.A)(H,N,J,!1,null,"1e0a5452",null),G=W.exports;i["default"].use(h.Ay);const K=[{path:"/",redirect:"/manager"},{path:"/login",name:"login",component:G},{path:"/manager",component:x,children:[{path:"",redirect:"users"},{path:"users",name:"users",component:F},{path:"questions",name:"questions",component:C},{path:"exams",name:"exams",component:V},{path:"results",name:"results",component:U}]}],X=new h.Ay({routes:K,mode:"history"});X.beforeEach(((e,t,a)=>{const i=["/login","/register","/forgot-password"],s=!i.includes(e.path),r=localStorage.getItem("xm-user"),n=localStorage.getItem("token");!s||r&&n?"/login"===e.path&&r&&n?a("/manager/users"):a():a("/login")}));var Y=X,Z=a(9143),ee=a.n(Z);i["default"].use(ee(),{size:"small"}),y.A.defaults.baseURL="http://hsq020828.cloud:9090",i["default"].prototype.$axios=y.A,y.A.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.token=t),e}),(e=>Promise.reject(e))),y.A.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(localStorage.removeItem("xm-user"),localStorage.removeItem("token"),Y.push("/login")),Promise.reject(e)))),new i["default"]({router:Y,render:e=>e(c)}).$mount("#app")}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,s,r){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],s=e[c][1],r=e[c][2];for(var l=!0,o=0;o<i.length;o++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](i[o])}))?i.splice(o--,1):(l=!1,r<n&&(n=r));if(l){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,r,n=i[0],l=i[1],o=i[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(o)var c=o(a)}for(t&&t(i);u<n.length;u++)r=n[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},i=self["webpackChunkvue"]=self["webpackChunkvue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(7996)}));i=a.O(i)})();